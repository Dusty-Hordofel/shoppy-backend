### D√©pendance entre Modules : Injection de D√©pendance Inter-Module

Dans cette vid√©o, nous allons explorer l'injection de d√©pendance entre modules, en l'occurrence entre le module `users` et le module `posts`. Voici comment nous allons proc√©der :

#### Cr√©ation d'un Endpoint dans le Module `Posts`

Nous allons commencer par d√©finir un point de terminaison pour r√©cup√©rer les posts d'un utilisateur sp√©cifique. Ce point de terminaison sera un GET endpoint avec une route qui inclut un param√®tre `userID`.

**√âtapes pour cr√©er l'endpoint :**

1. **Cr√©ation du M√©thode GET dans le Contr√¥leur des Posts :**

   - Nous allons cr√©er une m√©thode appel√©e `getPosts` qui sera accessible via la route `/posts/:userID`.
   - Nous allons utiliser le d√©corateur `@Get` pour d√©finir ce point de terminaison comme une requ√™te GET.
   - Le param√®tre `userID` sera extrait de la requ√™te en utilisant le d√©corateur `@Param`.

2. **D√©finition de la M√©thode dans le Service des Posts :**
   - Nous allons ajouter une m√©thode `findAll` dans le service des posts. Cette m√©thode prendra `userID` comme param√®tre et renverra les posts associ√©s √† cet utilisateur.

#### Impl√©mentation dans le Contr√¥leur des Posts

**1. Cr√©ation de la M√©thode GET**

Nous allons d'abord ajouter la m√©thode `getPosts` dans le contr√¥leur des posts :

```typescript
import { Controller, Get, Param } from "@nestjs/common";
import { PostService } from "./providers/post.service";

@Controller("posts")
export class PostController {
  constructor(private readonly postService: PostService) {}

  @Get(":userId")
  public getPosts(@Param("userId") userId: string) {
    return this.postService.findAll(userId);
  }
}
```

- **Route** : `/posts/:userId`
- **Param√®tre** : `userId` (de type `string`, extrait de l'URL)
- **Action** : Appel √† la m√©thode `findAll` du service des posts avec `userId` comme argument.

**2. Cr√©ation de la M√©thode dans le Service des Posts**

Nous devons maintenant ajouter la m√©thode `findAll` dans le service des posts. Cette m√©thode prendra le `userId` et pour l'instant, affichera simplement l'ID dans la console :

```typescript
import { Injectable } from "@nestjs/common";

@Injectable()
export class PostService {
  public findAll(userId: string): void {
    console.log(`Fetching posts for user ID: ${userId}`);
    // Ici, nous ajouterons plus de logique pour r√©cup√©rer les posts dans la base de donn√©es.
  }
}
```

- **M√©thode** : `findAll` (prend `userId` en argument et affiche l'ID dans la console)

#### Test de l'Endpoint

Nous allons maintenant tester notre endpoint. Pour ce faire, nous cr√©ons un fichier HTTP pour les tests dans le r√©pertoire `posts`.

**Cr√©ation du fichier de test :**

1. **Cr√©er un fichier `posts.get.endpoints.http` dans le r√©pertoire `posts/http`** :

   - Ce fichier contiendra les requ√™tes pour tester notre API.

2. **Ajouter la requ√™te GET :**

```http
GET http://localhost:3000/posts/1
```

- Remplacez `1` par un `userID` de votre choix pour tester diff√©rentes valeurs.

#### R√©sultat du Test

Lorsque nous envoyons la requ√™te GET, nous devrions voir l'ID utilisateur affich√© dans la console du serveur, indiquant que la m√©thode `findAll` a √©t√© correctement appel√©e avec le param√®tre `userId`.

### Prochaines √âtapes

Dans la prochaine vid√©o, nous allons :

1. **Compl√©ter la M√©thode `findAll`** dans le service des posts pour r√©cup√©rer r√©ellement les posts depuis la base de donn√©es.
2. **Configurer l'Injection de D√©pendances Inter-Module** entre le module `posts` et le module `users`, en permettant au service des posts d'acc√©der aux services du module `users`.

Merci d'avoir suivi cette vid√©o ! Nous nous retrouverons dans la prochaine pour continuer avec l'injection de d√©pendances inter-module. √Ä bient√¥t !

```ts
import { Controller, Get, Param } from "@nestjs/common";
import { PostsService } from "./posts.service";

@Controller("posts")
export class PostsController {
  //Injecting Posts Service
  constructor(private readonly postsService: PostsService) {}

  @Get("/:userId?")
  public getPosts(@Param("userId") userId: string) {
    return this.postsService.findAll(userId);
  }
}
```

```ts
import { Injectable } from "@nestjs/common";

@Injectable()
export class PostsService {
  findAll(userId: string) {
    console.log("üöÄ ~ PostsService ~ findAll ~ userId:", userId);
    return `userId in this section is ${userId}`;
  }
}
```
